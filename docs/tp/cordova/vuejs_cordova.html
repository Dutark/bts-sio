
<!DOCTYPE HTML>
<html lang="fr" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Projet Cordova + VueJS · Cours BTS SIO Slam 5</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-toc/page-toc.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-click-reveal/click_reveal.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../api/doc_api_led.html" />
    
    
    <link rel="prev" href="decouverte.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Tapez pour rechercher" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Aides mémoires
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../cheatsheets/git/">
            
                <a href="../../cheatsheets/git/">
            
                    
                    Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../cheatsheets/cordova/">
            
                <a href="../../cheatsheets/cordova/">
            
                    
                    Cordova
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../cheatsheets/docker/">
            
                <a href="../../cheatsheets/docker/">
            
                    
                    Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../cheatsheets/vuejs/">
            
                <a href="../../cheatsheets/vuejs/">
            
                    
                    VueJS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Initiation à Git
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=git">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../git_initiation/">
            
                <a href="../git_initiation/">
            
                    
                    TP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Git en groupe + GitLab
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=gitlab">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../gitlab/">
            
                <a href="../gitlab/">
            
                    
                    Git en groupe + GitLab
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Organisation du code (À relire)
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=organisations">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../organisation/introduction.html">
            
                <a href="../organisation/introduction.html">
            
                    
                    (Ré)organisation d'un code
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Javascript avancé (À venir)
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=javascript_avancés">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../javascript_avancés/introduction.html">
            
                <a href="../javascript_avancés/introduction.html">
            
                    
                    Prise en main « Javascript avancés »
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Programmation sécurisée avec OWASP
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=securite_applications">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../securite/">
            
                <a href="../securite/">
            
                    
                    Tentatives et injections
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    Laravel
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=laravel">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../laravel/introduction.html">
            
                <a href="../laravel/introduction.html">
            
                    
                    Installation de Laravel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../laravel/application_todo_list.html">
            
                <a href="../laravel/application_todo_list.html">
            
                    
                    Application/Site web Todo List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../laravel/creation_api.html">
            
                <a href="../laravel/creation_api.html">
            
                    
                    Lumen pour écrire des API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    NodeJS  (À venir)
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" >
            
                <span>
            
                    
                    Slides
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" >
            
                <span>
            
                    
                    Réaliser des API en Javascript
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" >
            
                <span>
            
                    
                    Hébergement dans le cloud
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    VueJS
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=vuejs">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../vuejs/tp1-vuejs-laravel-api.html">
            
                <a href="../vuejs/tp1-vuejs-laravel-api.html">
            
                    
                    Librairie VueJS + Laravel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../vuejs/tp1.html">
            
                <a href="../vuejs/tp1.html">
            
                    
                    Librairie VueJS + Web Php
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../vuejs/tp2.html">
            
                <a href="../vuejs/tp2.html">
            
                    
                    Réaliser une application avec VueJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../vuejs/firebase-vuejs.html">
            
                <a href="../vuejs/firebase-vuejs.html">
            
                    
                    VueJS + Firebase
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    VueJS exemple
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/demo/vuejs/demo1/index.html">
            
                    
                    Démo 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/demo/vuejs/counter/index.html">
            
                    
                    Compteur
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/demo/vuejs/clock/index.html">
            
                    
                    Horloge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/demo/vuejs/timestamp-color/index.html">
            
                    
                    Timestamp + Couleur
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/demo/vuejs/sound/index.html">
            
                    
                    Sonomètre
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Cordova + VueJS
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=cordova">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="decouverte.html">
            
                <a href="decouverte.html">
            
                    
                    Découverte
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.12.3" data-path="vuejs_cordova.html">
            
                <a href="vuejs_cordova.html">
            
                    
                    Projet Cordova + VueJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../api/doc_api_led.html">
            
                <a href="../api/doc_api_led.html">
            
                    
                    Documentation API « Led »
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    Docker
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" >
            
                <a target="_blank" href="https://rawgit.com/c4software/bts/master/cours/docker/">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../docker/introduction.html">
            
                <a href="../docker/introduction.html">
            
                    
                    Première approche
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../docker/dockerfile.html">
            
                <a href="../docker/dockerfile.html">
            
                    
                    Dockerfile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../docker/docker_compose.html">
            
                <a href="../docker/docker_compose.html">
            
                    
                    Docker Compose
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                    GitLab-CI
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=gitlabci">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../ci/pages.html">
            
                <a href="../ci/pages.html">
            
                    
                    Utiliser Gitlab Pages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="../ci/ci-hybride.html">
            
                <a href="../ci/ci-hybride.html">
            
                    
                    App Hybride et Gitlab-CI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" >
            
                <span>
            
                    
                    Python : Framework Flask
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=python">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../python/flask.html">
            
                <a href="../python/flask.html">
            
                    
                    Installation de Python et Flask
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="../python/flask_todolist_api.html">
            
                <a href="../python/flask_todolist_api.html">
            
                    
                    Réécriture des API de la TODO List
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" >
            
                <span>
            
                    
                    Android
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" >
            
                <a target="_blank" href="https://c4software.github.io/bts-sio/cours/sources/revealjs/index.html?source=android">
            
                    
                    Slides
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Publié avec GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Projet Cordova + VueJS</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <blockquote>
<p><em>Last modified: Sun Sep 01 2019 12:49:41 GMT+0200 (GMT+02:00)</em></p>
</blockquote>
<h1 id="vuejs-et-cordova">VueJS et Cordova</h1>
<p>Maintenant que nous avons vu les bases de Cordova (Cr&#xE9;ation, Plateforme, plugin). Int&#xE9;r&#xE9;ssons nous &#xE0; la cr&#xE9;ation d&#x2019;une vrai application. Dans le monde de cordova il existe plusieurs fa&#xE7;on de faire :</p>
<ul>
<li>Sans Framework.</li>
<li>Avec un framework web classique (type VueJS, ReactJS&#x2026;)</li>
<li>Avec un framework d&#xE9;di&#xE9; type ionic</li>
<li>Avec des solutions comme Phonegap</li>
</ul>
<p>Pour ce TP nous allons faire une application en utilisant Cordova + VueJS.</p>
<h2 id="le-projet">Le projet</h2>
<p>Nous allons r&#xE9;aliser une application qui teste plusieurs plugins Cordova. Cette application utilisera VueJS et VuetifyJS</p>
<p><img src="ressources/sample.png" alt="Sample"></p>
<p>Cette application sera tr&#xE8;s simple. Mais va permettre de tester la puissance de Cordova, nous allons utiliser les plugins suivants :</p>
<ul>
<li>cordova-plugin-dialogs</li>
<li>cordova-plugin-vibration</li>
<li>cordova-plugin-geolocation</li>
<li>cordova-plugin-flashlight</li>
<li>cordova-plugin-camera</li>
<li>phonegap-nfc</li>
<li>cordova-plugin-statusbar</li>
<li>cordova-plugin-headercolor</li>
</ul>
<h2 id="le-code">Le code</h2>
<p>Le projet &#xE9;tant assez cons&#xE9;quent je vous propose de partir d&#x2019;une base d&#xE9;j&#xE0; faite de l&#x2019;application. Celle-ci contient :</p>
<ul>
<li>L&#x2019;accueil</li>
<li>Les scripts pour compiler la partie Cordova</li>
<li>Les plugins &#xAB; pr&#xE9;-configur&#xE9;s &#xBB; / d&#xE9;clar&#xE9; dans le fichier <code>config.xml</code>.</li>
</ul>
<p>Le code est <a href="sources/vuejs-cordova-sample.zip">t&#xE9;l&#xE9;chargeable ici</a></p>
<h2 id="utiliser-le-code-fourni">Utiliser le code fourni</h2>
<p>Maintenant que vous avez r&#xE9;cup&#xE9;r&#xE9; le code. Nous allons le rendre fonctionnel pour votre ordinateur.</p>
<h3 id="1-compiler-une-premi&#xE8;re-fois-le-code-vuejs">1. Compiler une premi&#xE8;re fois le code (VueJS)</h3>
<p>Le projet &#xE9;tant &#xAB; non compil&#xE9; &#xBB; / &#xAB; non install&#xE9; &#xBB;, nous allons devoir dans un premier temps installer les d&#xE9;pendances n&#xE9;c&#xE9;ssaires &#xE0; notre projet. Pour se faire nous allons utiliser <code>npm</code> avec la commande <code>install</code>. Dans le dossier du projet :</p>
<pre><code class="lang-shell">npm install .
</code></pre>
<p>Les d&#xE9;pendances &#xAB; VueJS &#xBB; s&#x2019;installent, l&#x2019;installation peut prendre quelques minutes. Une fois install&#xE9; tester le fonctionnement avec la commande :</p>
<pre><code class="lang-shell">npm run serve
</code></pre>
<p>Ouvrez un navigateur et acc&#xE9;dez &#xE0; l&#x2019;url suivante <a href="http://localhost:8080/" target="_blank">http://localhost:8080/</a> vous devez voir :</p>
<p><img src="ressources/run1.png" alt="run1"></p>
<ul>
<li>Passer en mode &#xAB; simulation de mobile &#xBB; pour &#xEA;tre proche de la compilation final.</li>
</ul>
<h3 id="2-ajouter-la-plateforme-cordova">2. Ajouter la plateforme (Cordova)</h3>
<p>Ajouter la plateforme Android au projet :</p>
<pre><code class="lang-shell">cd cordova_app/
mkdir www
cordova platform add android
</code></pre>
<p>&#x270B; Attention &#xE0; bien cr&#xE9;er le dossier <code>www</code> pour que l&apos;outil Cordova d&#xE9;t&#xE8;cte bien le projet comme &#xE9;tant un projet Cordova.</p>
<h3 id="3-lancer-sur-votre-mobile-ou-&#xE9;mulateur">3. Lancer sur votre mobile (ou &#xE9;mulateur)</h3>
<p>Maintenant que la plateforme est pr&#xEA;te et que notre code est disponible, nous allons compiler l&#x2019;application pour la lancer sur votre t&#xE9;l&#xE9;phone. La premi&#xE8;re &#xE9;tape est de &#xAB; builder &#xBB; l&#x2019;application VueJS en version distribuable :</p>
<pre><code class="lang-shell">npm run build
</code></pre>
<p>&#x270B; La configuration de base d&#x2019;un projet VueJS cr&#xE9;&#xE9; par VueCLI n&#x2019;est pas forc&#xE9;ment le plus adapt&#xE9; pour Cordova. J&#x2019;ai donc &#xE9;dit&#xE9; les fichiers :</p>
<ul>
<li><code>build/build.js</code></li>
<li><code>config/index.js</code></li>
</ul>
<p>Vous pouvez jeter un coup d&#x2019;oeil pour voir les diff&#xE9;rences avec la version normal. Notamment la partie concernant le file://, cordova utilise l&#x2019;URI <code>file://</code> pour servir les ressources dans l&#x2019;APK, par d&#xE9;faut les d&#xE9;veloppeurs de VueCLI ont mis des liens avec <code>/</code> en dur ce qui pose des soucis. J&#x2019;ai donc remplac&#xE9; le <code>/</code> par <code>./</code> ce qui corrige le soucis.</p>
<p>Maintenant que le &#xAB; build &#xBB; est termin&#xE9; nous pouvons r&#xE9;aliser le lancement sur le mobile via les commandes suivantes :</p>
<pre><code class="lang-shell">cd cordova_app/
cordova run android
</code></pre>
<p>&#x270B; Votre mobile doit &#xEA;tre connect&#xE9; &#xE0; cette &#xE9;tape, l&#x2019;application va se lancer directement sur votre mobile. Si ce n&#x2019;est pas le cas il vous faut un &#xE9;mulateur Android sur votre machine.</p>
<h2 id="ajouter-la-vue-localisation">Ajouter la vue Localisation</h2>
<p>Pour commencer nous allons ajouter la vue &#xAB; Localisation &#xBB;. C&#x2019;est certainement la plus compliqu&#xE9; de toutes, mais c&#x2019;est celle qui est la plus int&#xE9;r&#xE9;ssante en terme de fonctionnement.</p>
<p><img src="ressources/localisation.png" alt="Localisation"></p>
<ul>
<li>Cr&#xE9;er un fichier <code>Localisation.vue</code> dans le dossier <code>views/</code></li>
<li>Ajouter le contenu suivant :</li>
</ul>
<pre><code class="lang-js"><span class="hljs-comment">// Require Cordova Plugin : cordova-plugin-geolocation</span>

&lt;template&gt;
  &lt;v-container fill-height fluid&gt;
    &lt;div id=&quot;map&quot;&gt;&lt;/div&gt;
    &lt;v-dialog value=&quot;isLoading&quot; persistent max-width=&quot;200&quot;&gt;
      &lt;v-card&gt;
        &lt;v-card-text class=&quot;text-center pa-10&quot;&gt;
          &lt;v-progress-circular :size=&quot;70&quot; indeterminate class=&quot;primary--text&quot;/&gt;
        &lt;/v-card-text&gt;
      &lt;/v-card&gt;
    &lt;/v-dialog&gt;
  &lt;/v-container&gt;
&lt;/template&gt;

&lt;script&gt;
  import &apos;leaflet/dist/leaflet.css&apos;;
  import L from &apos;leaflet&apos;;
  import {nativeAlert} from &quot;../libs/&quot;;
  // Fix for icon problem with webpack
  // See https://github.com/PaulLeCam/react-leaflet/issues/255#issuecomment-261904061
  delete L.Icon.Default.prototype._getIconUrl;
  L.Icon.Default.mergeOptions({
    iconRetinaUrl: require(&apos;leaflet/dist/images/marker-icon-2x.png&apos;),
    iconUrl: require(&apos;leaflet/dist/images/marker-icon.png&apos;),
    shadowUrl: require(&apos;leaflet/dist/images/marker-shadow.png&apos;),
  });
  export default {
    name: &apos;localisation&apos;,
    data() {
      return {
        isLoading: true
      }
    },
    mounted() {
      // Init the leaflet map
      this.map = L.map(&apos;map&apos;).setView([47.47121, -0.55198], 5);
      L.tileLayer(&apos;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&apos;).addTo(this.map);
      this.getUserLocation();
    },
    beforeDestroy(){
      // Destroy the map object on leave
      if(!(this.map === undefined)){
        this.map.remove();
      }
    },
    methods: {
      stopLoading(){
        this.isLoading = false;
      },
      getUserLocation() {
        // Retrieve the current user location
        if (navigator.geolocation) {
          // If the geolocation is available
          navigator.geolocation.getCurrentPosition((position) =&gt; {
            // Get the current user position, and create a marker on the map.
            // Pssst, look at the position object there is a lot of more information
            let user_position = [position.coords.latitude, position.coords.longitude];
            L.marker(user_position).addTo(this.map);
            // Set the view on the user position at a correct zoom level
            this.map.setView(user_position, 18);
            this.stopLoading();
          }, () =&gt; {
            // If the geolocation plugin not answer or if we reach the timeout
            this.stopLoading();
            nativeAlert(this.$t(&quot;positionNotAvailable&quot;, this.$t(&quot;localisation&quot;)));
          });
        }else{
          // If the browser is not compatible
          nativeAlert(this.$t(&quot;positionNotAvailable&quot;, this.$t(&quot;localisation&quot;)));
          this.stopLoading();
        }
      }
    }
  }
&lt;/script&gt;

&lt;style scoped&gt;
  .container{
    padding: 0;
  }
  #map{
    height: calc(100vh - 50px);
    width: 100%;
    z-index: 1;
  }
  .loading {
    position: absolute;
    width: 150px;
    height: 150px;
    bottom: 50vh;
    top: 50vh;
    z-index: 200;
    margin: auto;
    background-color: white;
    border-radius: 5px;
    left: calc(50% - 50px);
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 10px;
  }
&lt;/style&gt;
</code></pre>
<ul>
<li>Ajouter l&#x2019;import dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Localisation <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/views/Localisation&quot;</span>;
</code></pre>
<ul>
<li>Ajouter l&#x2019;&#xE9;l&#xE9;ment <strong><em>au bon endroit</em></strong> suivant dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js">{
      path: <span class="hljs-string">&apos;/localisation&apos;</span>,
      name: <span class="hljs-string">&apos;Localisation&apos;</span>,
      component: Localisation
}
</code></pre>
<ul>
<li>Lancer le serveur des developpement :</li>
</ul>
<pre><code class="lang-shell">npm run serve
</code></pre>
<ul>
<li>Tester l&#x2019;ajout.</li>
<li>Recompiler l&#x2019;application et lancer la sur votre t&#xE9;l&#xE9;phone :</li>
</ul>
<pre><code class="lang-shell">npm run build
cd cordova_app
cordova run android
</code></pre>
<h2 id="ajouter-la-vue-vibration">Ajouter la vue Vibration</h2>
<p>Cette vue est tr&#xE8;s simple, elle a pour but d&#x2019;utiliser le plugin vibration. Avant de faire le code, je vous propose de regarder la documentation du plugin <a href="https://github.com/apache/cordova-plugin-vibration#vibrate-recommended" target="_blank">cordova-vibrate</a>. Une fois la documentation lue, passons &#xE0; l&#x2019;&#xE9;criture de la vue.</p>
<p>L&#x2019;&#xE9;criture de la fonctionnalit&#xE9;e va se d&#xE9;rouler en 3 &#xE9;tapes :</p>
<ul>
<li>Cr&#xE9;ation de <code>Vibration.vue</code> dans <code>views</code>.</li>
<li>&#xC9;criture de code de la vue.</li>
<li>D&#xE9;claration de la route.</li>
</ul>
<h3 id="1-le-code">1. Le code</h3>
<p>Le projet &#xE9;tant d&#xE9;j&#xE0; r&#xE9;alis&#xE9; le plugin est d&#xE9;j&#xE0; install&#xE9;, il nous suffit donc d&#x2019;&#xE9;crire le code de la vue. Je vous laisse la base du code, je vous laisse &#xE9;crire le code permettant la vibration :</p>
<pre><code class="lang-js"><span class="hljs-comment">// Require Cordova plugin : cordova-plugin-vibration</span>

&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">v-container</span> <span class="hljs-attr">text-center</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;doVibrate&quot;</span>&gt;</span>{{$t(&quot;startVibration&quot;)}}<span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">v-container</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    name: <span class="hljs-string">&apos;vibration&apos;</span>,
    methods: {
      doVibrate () {
        <span class="hljs-comment">// Test si la vibration est disponible</span>
        <span class="hljs-keyword">if</span> (navigator.vibrate){
            <span class="hljs-comment">// Code ICI (utiliser la documentation bien &#xE9;videment&#x2026;)</span>
        }<span class="hljs-keyword">else</span>{
          <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&quot;[cordova-plugin-vibration] Is required to use this function&quot;</span>);
        }
      }
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<h3 id="2-la-route">2. La route</h3>
<ul>
<li>Ajouter l&#x2019;import dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Vibration <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/views/Vibration&quot;</span>;
</code></pre>
<ul>
<li>Ajouter l&#x2019;&#xE9;l&#xE9;ment <strong><em>au bon endroit</em></strong> suivant dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js">{
    path: <span class="hljs-string">&apos;/vibration&apos;</span>,
    name: <span class="hljs-string">&apos;Vibration&apos;</span>,
    component: Vibration
}
</code></pre>
<h2 id="ajouter-la-vue-flash">Ajouter la vue Flash</h2>
<p>Une lampe torche c&#x2019;est fun non ? Et bien nous allons r&#xE9;aliser une nouvelle page qui aura pour simple but d&#x2019;allumer (ou &#xE9;teindre) le flash de votre t&#xE9;l&#xE9;phone. Pour &#xE7;a nous allons utiliser le plugin <code>cordova-plugin-flashlight</code>, avant d&#x2019;&#xE9;crire le code nous allons lire la documentation &#xE0; <a href="https://github.com/EddyVerbruggen/Flashlight-PhoneGap-Plugin" target="_blank">l&#x2019;adresse suivante</a>. C&#x2019;est fait ? Passons au code.</p>
<p>L&#x2019;&#xE9;criture va se d&#xE9;rouler en 3 &#xE9;tapes :</p>
<ul>
<li>Cr&#xE9;ation de <code>Flash.vue</code> dans <code>views</code>.</li>
<li>&#xC9;criture de code de la vue.</li>
<li>D&#xE9;claration de la route.</li>
</ul>
<p>&#x270B; Petite subtilit&#xE9;! N&#x2019;oubliez pas, VueJS propose une gestion du cycle de vie. Dans cette vue &#xE7;a va nous servir, nous allons utiliser le <code>beforeDestroy</code> pour &#xE9;teindre la lampe si celle si est allum&#xE9;e.</p>
<h3 id="1-le-code">1. Le code</h3>
<p>Voici la structure de code. Je vous laisse la compl&#xE9;ter</p>
<p>&#x270B; N&#x2019;oublier pas de g&#xE9;rer le <code>beforeDestroy</code> pour stoper le flash en changeant de &#xAB; page &#xBB;</p>
<pre><code class="lang-js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">v-container</span> <span class="hljs-attr">text-center</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;toggle&quot;</span>&gt;</span>{{ btnTitle }}<span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">v-container</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    name: <span class="hljs-string">&apos;flash&apos;</span>,
    mounted(){
      <span class="hljs-comment">// Set the ButtonTitle according the plugin state</span>
      <span class="hljs-keyword">this</span>.setBtnTitle();
    },
    beforeDestroy(){
      <span class="hljs-comment">// When the view is destroyed turnoff the flashlight</span>
      <span class="hljs-comment">// TODO</span>
    },
    data: () =&gt; {
      <span class="hljs-keyword">return</span> {
        btnTitle: <span class="hljs-string">&quot;&quot;</span>
      }
    },
    methods: {
      pluginInstalled() {
        <span class="hljs-comment">// Check if the cordova Flashlight is available</span>
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">typeof</span>(plugins) !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; <span class="hljs-keyword">typeof</span>(<span class="hljs-built_in">window</span>.plugins.flashlight) !== <span class="hljs-string">&quot;undefined&quot;</span>);
      },
      toggle() {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pluginInstalled()){
          <span class="hljs-comment">// Toggle the flashlight state</span>
          <span class="hljs-comment">// TODO Call The plugin</span>
        }
      },
      switchOff() {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pluginInstalled()){
          <span class="hljs-comment">// Turn off the flashlight led</span>
          <span class="hljs-comment">// TODO Call The plugin</span>
        }
      },
      setBtnTitle() {
        <span class="hljs-comment">// Manage the button title state</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pluginInstalled()){
          <span class="hljs-comment">// Test if flashlight is On ?</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.plugins.flashlight.isSwitchedOn()){
            <span class="hljs-keyword">this</span>.btnTitle = <span class="hljs-keyword">this</span>.$t(<span class="hljs-string">&quot;flashlight.stop&quot;</span>);
          }<span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">this</span>.btnTitle = <span class="hljs-keyword">this</span>.$t(<span class="hljs-string">&quot;flashlight.start&quot;</span>);
          }
        }<span class="hljs-keyword">else</span>{
          <span class="hljs-keyword">this</span>.btnTitle = <span class="hljs-keyword">this</span>.$t(<span class="hljs-string">&quot;flashlight.notAvailable&quot;</span>);
        }
      }
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<h3 id="2-la-route">2. La route</h3>
<ul>
<li>Ajouter l&#x2019;import dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Flash <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/views/Flash&quot;</span>;
</code></pre>
<ul>
<li>Ajouter l&#x2019;&#xE9;l&#xE9;ment <strong><em>au bon endroit</em></strong> suivant dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js">{
    path: <span class="hljs-string">&apos;/flash&apos;</span>,
    name: <span class="hljs-string">&apos;Flash&apos;</span>,
    component: Flash
}
</code></pre>
<h2 id="ajouter-la-vue-camera">Ajouter la vue Camera</h2>
<p>Apr&#xE8;s le flash, pourquoi ne pas prendre une photo? Et bien avec Cordova c&#x2019;est tr&#xE8;s simple. En quelques bout de code Javascript vous allez pouvoir utiliser l&#x2019;appareil photo du t&#xE9;l&#xE9;phone. Nous allons utiliser le plugin <code>cordova-plugin-camera</code>, avant d&#x2019;attaquer le code regardez la documentation <a href="https://github.com/apache/cordova-plugin-camera#api-reference-" target="_blank">disponible ici</a>.</p>
<p>L&#x2019;&#xE9;criture va se d&#xE9;rouler en 3 &#xE9;tapes :</p>
<ul>
<li>Cr&#xE9;ation de <code>Camera.vue</code> dans <code>views</code>.</li>
<li>&#xC9;criture de code de la vue.</li>
<li>D&#xE9;claration de la route.</li>
</ul>
<h3 id="1-le-code">1. Le code</h3>
<p>Pour la cam&#xE9;ra, nous allons &#xAB; juste &#xBB; faire une simple vue qui permet de lancer l&#x2019;appareil photo et on affichera l&#x2019;image prise dans l&#x2019;application (Tester diff&#xE9;rentes options pour regarder le fonctionnement du plugin). Voici la structure de code :</p>
<pre><code class="lang-js"><span class="hljs-comment">// Require Cordova plugin : cordova-plugin-camera</span>

&lt;template&gt;
  &lt;v-container text-center&gt;
    &lt;img v-if=&apos;imagePath !== &quot;&quot;&apos; v-bind:src=&quot;imagePath&quot;&gt;
    &lt;v-btn v-on:click=&quot;takePicture&quot;&gt;{{$t(&quot;takePhoto&quot;)}}&lt;/v-btn&gt;
  &lt;/v-container&gt;
&lt;/template&gt;

&lt;script&gt;
  import {nativeAlert} from &quot;../libs/index&quot;;

  export default {
    name: &apos;camera&apos;,
    data() {
      return {
        imagePath: &quot;&quot;
      }
    },
    methods: {
      // Use the camera plugin to capture image
      takePicture() {
        if (navigator.camera) {
          navigator.camera.getPicture(this.setPicture, this.error, {});
        }else{
          // If the navigator.camera is not available display generic error to the user.
          this.error();
        }
      },
      // Set the picture path in the data of the vue
      // this action will automatically update the view.
      setPicture(imagePath){
        this.imagePath = imagePath;
      },
      error(){
        nativeAlert(this.$t(&quot;error&quot;));
      }
    }
  }
&lt;/script&gt;

&lt;style scoped&gt;
  img{
    width: 50%;
    display: block;
    margin: auto;
  }
&lt;/style&gt;
</code></pre>
<h3 id="2-la-route">2. La route</h3>
<ul>
<li>Ajouter l&#x2019;import dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Vibration <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/views/Camera&quot;</span>;
</code></pre>
<ul>
<li>Ajouter l&#x2019;&#xE9;l&#xE9;ment <strong><em>au bon endroit</em></strong> suivant dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js">{
    path: <span class="hljs-string">&apos;/camera&apos;</span>,
    name: <span class="hljs-string">&apos;Camera&apos;</span>,
    component: Camera
}
</code></pre>
<h2 id="un-peu-plus-oui-le-nfc">Un peu plus? Oui! Le NFC</h2>
<p>Il est &#xE9;galement possible d&#x2019;int&#xE9;ragir avec la &#xAB; puce &#xBB; NFC de votre mobile (si &#xE9;quip&#xE9; bien sur). Comme toujours &#xE7;a passe par un plugin <code>phonegap-nfc</code> le plugin est plus complet, mais par contre la lecture du serial number est plut&#xF4;t simple. C&#x2019;est ce que l&#x2019;on va voir dans cette partie.</p>
<p>L&#x2019;&#xE9;criture va se d&#xE9;rouler en 3 &#xE9;tapes :</p>
<ul>
<li>Cr&#xE9;ation de <code>Nfc.vue</code> dans <code>views</code>.</li>
<li>&#xC9;criture de code de la vue.</li>
<li>D&#xE9;claration de la route.</li>
</ul>
<h3 id="1-le-code">1. Le code</h3>
<p>Le code de la partie NFC est un peu plus complexe. Pour la d&#xE9;mo, j&#x2019;ai mis un exemple de lecture du &#xAB; num&#xE9;ro de s&#xE9;rie &#xBB; d&#x2019;un tag NFC (avec historique)</p>
<pre><code class="lang-js"><span class="hljs-comment">// Require Cordova plugin : phonegap-nfc</span>
&lt;template&gt;
  &lt;v-container text-center&gt;
      &lt;span v-if=&quot;compatible&quot;&gt;
        {{$t(&quot;nfcText.waitingTag&quot;)}}
        &lt;br&gt;
        &lt;v-dialog v-model=&quot;dialog&quot; scrollable&gt;
          &lt;template v-slot:activator=&quot;{ on }&quot;&gt;
            &lt;v-btn v-on=&quot;on&quot;&gt;{{$t(&quot;nfcText.history&quot;)}}&lt;/v-btn&gt;
          &lt;/template&gt;

          &lt;v-card&gt;
            &lt;v-card-title&gt;{{$t(&quot;nfcText.history&quot;)}}&lt;/v-card-title&gt;
            &lt;v-divider&gt;&lt;/v-divider&gt;
            &lt;v-card-text style=&quot;height: 300px;&quot;&gt;
                &lt;v-list-item v-for=&quot;item in items&quot; v-bind:key=&quot;item&quot;&gt;
                  &lt;v-list-item-content&gt;
                    &lt;v-list-item-title v-text=&quot;item&quot;&gt;&lt;/v-list-item-title&gt;
                  &lt;/v-list-item-content&gt;
                &lt;/v-list-item&gt;
                &lt;v-list-item v-if=&quot;items.length === 0&quot;&gt;
                  &lt;v-list-item-content&gt;
                    &lt;v-list-item-title v-text=&quot;$t(&apos;nfcText.noHistory&apos;)&quot; class=&quot;text-center&quot;&gt;&lt;/v-list-item-title&gt;
                  &lt;/v-list-item-content&gt;
                &lt;/v-list-item&gt;
            &lt;/v-card-text&gt;
          &lt;/v-card&gt;
        &lt;/v-dialog&gt;
      &lt;/span&gt;
      &lt;v-btn v-on:click=&quot;showSettings&quot; v-else-if=&quot;nfc_disabled&quot;&gt;{{$t(&quot;nfcText.showSettings&quot;)}}&lt;/v-btn&gt;
      &lt;span v-else&gt;{{$t(&quot;nfcText.notAvailable&quot;)}}&lt;/span&gt;
  &lt;/v-container&gt;
&lt;/template&gt;

&lt;script&gt;
  import {nativeAlert} from &quot;../libs&quot;;
  export default {
    name: &apos;nfc&apos;,
    data(){
      return {
        compatible: true,
        nfc_disabled: false,
        dialog: false,
        items: JSON.parse((localStorage.getItem(&quot;scanHistory&quot;)||&quot;[]&quot;)),
      }
    },
    watch:{
      items: function (v) {
        // Watch push on the items data. If a new item is push save it to the &#xAB; localStorage &#xBB;.
        localStorage.setItem(&quot;scanHistory&quot;, JSON.stringify(this.items));
      }
    },
    mounted(){
      // When the view is mounted, register the scan tag event.
      this.registerTagEvent();
    },
    beforeDestroy(){
      // When the view is destroyed (user leave), unregister the scan tag event, to avoid scanning tag in other view
      this.unregisterTagEvent();
    },
    methods: {
      registerTagEvent(){
        // Unregister previously &#xAB; resume &#xBB; event listener.
        document.removeEventListener(&quot;resume&quot;, this.registerTagEvent, false);

        if (typeof(nfc) !== &quot;undefined&quot;){
          // Nfc is available, waiting for scan
          nfc.addTagDiscoveredListener(this.displayTagId, this.success, this.error);
        }else{
          // Plugin not present or failed to initialized.
          this.error();
        }
      },
      unregisterTagEvent(){
        // Test if the plugin is defined
        if (typeof(nfc) !== &quot;undefined&quot;) {
          nfc.removeTagDiscoveredListener(this.displayTagId);
        }
      },
      displayTagId(nfcEvent){
        // Decode tag data from the plugin
        let tag = nfcEvent.tag;
        let tagId = nfc.bytesToHexString(tag.id);

        // Push the new tag to the saved list
        this.items.push(tagId);

        // Show the tag Id to the user
        nativeAlert(this.$t(&quot;nfcText.tagSerial&quot;) + &quot; : &quot; + tagId);
      },
      error(e){
        // Manage the state
        if(e === &quot;NFC_DISABLED&quot;){
          this.compatible = false;
          this.nfc_disabled = true;
        }else{
          this.nfc_disabled = false;
          this.compatible = false;
        }
      },
      success(){
        this.compatible = true;
        this.nfc_disabled = false;
        console.log(&quot;Nfc initialized&quot;);
      },
      showSettings(){
        // Trigger the phone settings to enable the Nfc settings
        nfc.showSettings();

        // To refresh the state of the nfc, we add a listener to the &#xAB; resume &#xBB; event.
        // The resume event is triggered by cordova when the app is &#xAB; Resumed &#xBB;.
        document.addEventListener(&quot;resume&quot;, this.registerTagEvent, false);
      }
    }
  }
&lt;/script&gt;
</code></pre>
<h3 id="2-la-route">2. La route</h3>
<ul>
<li>Ajouter l&#x2019;import dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Vibration <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/views/Nfc&quot;</span>;
</code></pre>
<ul>
<li>Ajouter l&#x2019;&#xE9;l&#xE9;ment <strong><em>au bon endroit</em></strong> suivant dans <code>router/index.js</code> :</li>
</ul>
<pre><code class="lang-js">{
    path: <span class="hljs-string">&apos;/nfc&apos;</span>,
    name: <span class="hljs-string">&apos;Nfc&apos;</span>,
    component: Nfc
}
</code></pre>
<h3 id="&#xE9;volution-0">&#xC9;volution 0</h3>
<p>L&apos;ensemble de vos boutons d&apos;action ne sont pas centr&#xE9;s&#x2026; Plut&#xF4;t moche n&apos;est-ce pas ! Regarder la documentation de Vuetify (par <a href="https://vuetifyjs.com/en/framework/alignment" target="_blank">ici est une bonne piste</a>) et trouver une solution pour aligner les diff&#xE9;rents boutons.</p>
<h3 id="&#xE9;volution-1">&#xC9;volution 1</h3>
<p>Le code de la vue NFC est plut&#xF4;t&#x2026; complexe ! Remplacer le <code>v-list</code> de la vue pr&#xE9;c&#xE9;dente par un tableau <code>v-datatable</code>, attention &#xE0; bien regarder la documentation.</p>
<h3 id="&#xE9;volution-2">&#xC9;volution 2</h3>
<p>L&apos;ouverture du menu est actuellement possible, mais uniquement en appuyant sur le bouton, c&apos;est bien, mais c&apos;est pas vraiment ce que l&apos;on attend d&apos;une application mobile, heureusement Vuetify propose nativement une options pour effectuer une action via un &#xAB; swipe &#xBB;.</p>
<ul>
<li>Pour &#xE7;a il faut ajouter la directive <a href="https://vuetifyjs.com/en/directives/touch-support#touch-support" target="_blank">v-touch</a>.</li>
<li>&#xC9;diter le fichier <code>App.vue</code> ajouter le <code>v-touch</code> sur le <code>v-content</code> comme sp&#xE9;cifi&#xE9; dans la documentation.</li>
<li>Sur la direction voulu ajouter l&apos;appel &#xE0; une <code>methods</code> qui ex&#xE9;cute le code :</li>
</ul>
<pre><code class="lang-js"><span class="hljs-built_in">document</span>.dispatchEvent(<span class="hljs-keyword">new</span> CustomEvent(<span class="hljs-string">&quot;toggleDrawer&quot;</span>, {}));
</code></pre>
<p>&#x26A0;&#xFE0F; Arriv&#xE9; ici ? Appeler moi ! On debrief.</p>
<h3 id="vuejs-le-r&#xE9;seau-et-une-led">VueJS, le r&#xE9;seau, et une led</h3>
<p>Au travers des diff&#xE9;rents exemples pr&#xE9;c&#xE9;dent nous avons utiliser que des fonctionnalit&#xE9;s &#xAB; locales &#xBB; &#xE0; votre t&#xE9;l&#xE9;phone.</p>
<p>Dans la vraie vie en plus d&apos;utiliser les capteurs du t&#xE9;l&#xE9;phone nous utilisons souvent des API.</p>
<p>L&apos;API que je vous propose permet de &#xAB; simuler &#xBB; une lampe connect&#xE9;e. En fonction de votre appel vous allez pouvoir allumer (ou &#xE9;teindre) une ampoule fictive (qui sera affich&#xE9;e sur le vid&#xE9;o projecteur).</p>
<h4 id="la-d&#xE9;marche">La d&#xE9;marche</h4>
<ul>
<li>Ajout &#xAB; une page &#xBB; avec un bouton + une ic&#xF4;ne <code>v-icone</code>.</li>
<li>Un mod&#xE8;le permettant de lire le retour de l&apos;API.</li>
<li>Un DAO permettant d&apos;appeler l&apos;API.</li>
<li>Ajouter la route.</li>
<li>Ajouter l&apos;entr&#xE9;e dans le menu permettant d&apos;afficher la page.</li>
<li>Go !</li>
</ul>
<h4 id="le-fonctionnement">Le fonctionnement</h4>
<ul>
<li>Trouver un nom &#xE0; votre &#xAB; leds &#xBB;.</li>
<li>Dans la vue &#xAB; led &#xBB; ajouter un bouton qui <code>@click</code> appel la m&#xE9;thode de votre choix.</li>
<li>Dans la m&#xE9;thode en question ajouter l&apos;appel au DAO que vous avez cr&#xE9;&#xE9;.</li>
<li>En fonction du retour ajuster la vue.</li>
</ul>
<h4 id="le-mod&#xE8;le">Le mod&#xE8;le</h4>
<p>Pour r&#xE9;aliser cette partie du TP vous allez devoir construire un mod&#xE8;le. Cette partie peut-&#xEA;tre assimil&#xE9; &#xE0; de la documentation je vous fourni donc la structure :</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Salon&quot;</span>,
  <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">&quot;update&quot;</span>: <span class="hljs-string">&quot;Tue, 19 Mar 2019 12:31:36 GMT&quot;</span>
}
</code></pre>
<p>&#x26A0;&#xFE0F; Maintenant que vous avez la structure vous pouvez &#xE9;crire le mod&#xE8;le.</p>
<h4 id="le-dao">Le DAO</h4>
<ul>
<li>Cr&#xE9;er le fichier</li>
<li>Impl&#xE9;menter la m&#xE9;thode <code>getStatus</code></li>
<li>Impl&#xE9;menter la m&#xE9;thode <code>setStatus</code></li>
</ul>
<p>C&apos;est &#xE0; vous de jouer !</p>
<h4 id="pour-vous-aidez-">Pour vous aidez &#x2026;</h4>
<p>Pour vous aidez, voici un exemple de Mod&#xE8;le et de DAO</p>
<p><a href="https://gist.github.com/c4software/30947f2a86eb0ab065d26a6ed0edb3e9" target="_blank">Consulter l&apos;exemple</a></p>
<h4 id="la-partie-ui">La partie UI</h4>
<ul>
<li>Importer le DAO.</li>
<li>Ajouter une ic&#xF4;ne (flash_on / flash_off en fonction du status).</li>
<li>Ajouter une action au <code>@click</code> permettant appelant le DAO <code>setStatus</code>.</li>
</ul>
<p>C&apos;est &#xE0; vous de jouer ! (pour de vrai)</p>
<h3 id="&#xE9;volution-de-lapi-1--ajout-de-la-position">&#xC9;volution de l&apos;API 1 : Ajout de la position</h3>
<p>L&apos;API en question poss&#xE8;de deux autres param&#xE8;tres <code>lat</code> et <code>lng</code>&#x2026; Les deux param&#xE8;tres sont la position de votre mobile.</p>
<ul>
<li>Ajouter dans le DAO les deux param&#xE8;tres.</li>
<li>Modifier le mod&#xE8;le pour le faire correspondre &#xE0; :</li>
</ul>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Salon&quot;</span>,
  <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">&quot;update&quot;</span>: <span class="hljs-string">&quot;Tue, 19 Mar 2019 12:31:36 GMT&quot;</span>,
  <span class="hljs-string">&quot;position&quot;</span>: { <span class="hljs-string">&quot;lat&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&quot;lng&quot;</span>: <span class="hljs-number">-0</span> }
}
</code></pre>
<ul>
<li>Ajouter le code javascript permettant de <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API" target="_blank">r&#xE9;cuperer la position de votre mobile</a></li>
<li>Tester</li>
</ul>
<h3 id="&#xE9;volution-de-lapi-2--ajouter-un-dashboard">&#xC9;volution de l&apos;API 2 : ajouter un Dashboard</h3>
<p>L&apos;API poss&#xE8;de &#xE9;galement une m&#xE9;thode <code>getAll</code> permettant de r&#xE9;cup&#xE9;rer l&apos;ensemble des leds actuellement connu par le syst&#xE8;me.</p>
<ul>
<li>Ajouter l&apos;appel de la m&#xE9;thode dans le DAO.</li>
<li>Ajouter une nouvelle page &#xE0; l&apos;application <code>listant</code> l&apos;ensemble des &#xAB; Leds &#xBB;. En utilisant une <code>v-list</code>.</li>
<li>Pour chaque ligne faire en sorte d&apos;afficher le status de la &#xAB; Led &#xBB;. Exemple :</li>
</ul>
<p><img src="ressources/led_status_example.png" alt="Led status"></p>
<ul>
<li>Au <code>@click</code> changer le status de la led</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="decouverte.html" class="navigation navigation-prev " aria-label="Previous page: Découverte">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../api/doc_api_led.html" class="navigation navigation-next " aria-label="Next page: Documentation API « Led »">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Projet Cordova + VueJS","level":"1.12.3","depth":2,"next":{"title":"Documentation API « Led »","level":"1.12.4","depth":2,"path":"tp/api/doc_api_led.md","ref":"tp/api/doc_api_led.md","articles":[]},"previous":{"title":"Découverte","level":"1.12.2","depth":2,"path":"tp/cordova/decouverte.md","ref":"tp/cordova/decouverte.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","page-toc","last-modified","click-reveal","expandable-chapters","code"],"styles":{"website":"styles/website.css"},"pluginsConfig":{"last-modified":{},"search":{},"page-toc":{"position":"before-first","selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4","showByDefault":true},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"click-reveal":{},"highlight":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Cours BTS SIO Slam 5","language":"fr","gitbook":"*","description":"Cette documentation est faite pour la matière Slam 5 du BTS SIO, vous retrouverez dans l’ensemble des cours (slide) ainsi que les TP."},"file":{"path":"tp/cordova/vuejs_cordova.md","mtime":"2019-09-01T10:49:41.895Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-09-17T20:55:54.613Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc/anchor-3.1.1.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc/page-toc.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-click-reveal/click_reveal.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

